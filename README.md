# kotlin-lotto

> 📝 개발에 앞서 먼저 구현 하고자 하는 기능을 정리 합니다.

## 1단계 - 문자열 덧셈 계산기

### 요구사항 

- 문자열을 구분자로 분리하여 분리된 숫자를 모두 합친다.
- 디폴트 구분자로 콤마','와 콜론':'이 있다.
- 문자열 맨앞에 //와 \n 로 시작한다면 그 사이의 문자도 구분자로 취급한다.
- 구분자와 숫자 외에 다른 문자열이 있다면 RuntimeException
- 음수도 RuntimeException 

### 추가   

- indent(인덴트, 들여쓰기) depth를 2를 넘지 않도록 구현한다. 1까지만 허용한다.
- 예를 들어 while문 안에 if문이 있으면 들여쓰기는 2이다.
- 힌트: indent(인덴트, 들여쓰기) depth를 줄이는 좋은 방법은 함수(또는 메서드)를 분리하면 된다.
- 함수(또는 메서드)의 길이가 10라인을 넘어가지 않도록 구현한다.
- 함수(또는 메서드)가 한 가지 일만 잘 하도록 구현한다.
- 되도록이면 정규식을 활용해보면 좋을 것 같다.

### 설계

- TextCalculator
    - Facade로서 입력을 받아서 결과를 출력하는 클래스. 모든 기능에 대해 각각 의존성을 주입받는다.
    - execute() : 입력을 받고, 파싱 한 다음, 전체를 더하고, 결과를 출력한다.
- Parser
    - 문자열을 쪼개는 핵심적인 기능 parse()를 수행한다. 내부적으로는 여러 함수로 나누어 처리.
    - spliter : 구분자 목록
    - parse() : 문자열을 List<Int>로 바꾼다. 바꿀 수 없으면 exception 발생
    - checkIfCustomPrefix() : //*\n으로 시작한다면 구분자에 추가한다.
    - split() : 문자열을 나누어 List<String>로 쪼갠다.
    - toInts() : List<String>을 List<Int>로 전부 바꾼다. 바꿀 수 없으면 exception 발생
- Calculator
    - sum() : List<Int>를 전부 합한다.
- IOManager
    - input() : 문자열을 입력 받는다.
    - output() : 결과 정수를 출력한다.
 
 ## 4단계 - 로또(수동)
 
 ### 요구사항
 
 - 로또 구입 금액을 입력하면 구입 금액에 해당하는 로또를 발급해야 한다.
 - 로또 1장의 가격은 1000원이다.
 - 지난 주 당첨 번호를 입력받으면 비교하여 발급된 로또 중 번호를 몇개 맞추었는지 통계를 낸다.
 - 맞춘 갯수에 따른 통계는 아래와 같다.
    - 3개 일치 (5000원)
    - 4개 일치 (50000원)
    - 5개 일치 (1500000원)
    - 5개 일치, 보너스 볼 일치(30000000)
    - 6개 일치 (2000000000원)
 - 총 수익률을 계산한다. (수입 / 비용)
 - 로또의 기본 규칙은 1 ~ 45 사이의 숫자 중 중복 없이 6개를 골라서 맞추는 것이다.
 - 보너스번호를 입력 받아 보너스볼이 맞고 5개를 일치하면 2등이다
 - 수동으로 구매할 갯수를 입력 받는다
 - 수동구매 갯수만큼 티켓을 수동으로 입력받는다.
 - 수동구매하지 않은 갯수만큼 자동으로 티켓을 발급받는다.
 
 ### 설계 
 
 - Ticket 
    - 로또 티켓 한장을 의미하고 Data class 로써 생성자에서 1 ~ 45 사이의 숫자 6개를 갖는다.
    - 당첨 번호를 받으면 몇개의 숫자가 일치하는 지 확인할 수 있다.
- Rank
    - 로또 등수에 해당하며 맞춘 갯수에 따라 보상을 갖는다 
- LottoResult
    - Rank를 감싸고 있는 1급 객체
    - 로또에 따른 수익률을 계산한다.
- LottoAnalytics
    - 당첨 티켓을 가지고 구매한 티켓 목록을 각각 비교하여 LottResult를 반환한다.
- TicketBuilder 
    - 구매 요청을 받으면 1 ~ 45 사이의 숫자 6개를 골라서 로또 티켓을 생성 한다.
    - 내부적으로 랜덤을 사용하므로 Main 또는 View 로직에서 생성한다.   
- LottoInputView
    - 사용자로부터 금액과 가격, 그리고 당첨 로또번호를 입력 받는다.
- LottoResultView
    - 결과와 통계를 출력한다.
- LottoController
    - 금액을 받으면 구매할 수 있는 최대 장수의 티켓을 TicketBuilder로 부터 구매한다.
    - 최종적으로 수익률을 계산한다.